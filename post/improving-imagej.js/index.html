<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 5.7.0 for Hugo"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload='this.media="all"'><link rel=stylesheet href=/css/vendor-bundle.min.047268c6dd09ad74ba54a0ba71837064.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/academicons@1.9.2/css/academicons.min.css integrity="sha512-KlJCpRsLf+KKu2VQa5vmRuClRFjxc5lXO03ixZt82HZUk41+1I0bD8KBSA0fY290ayMfWYI9udIqeOWSu1/uZg==" crossorigin=anonymous media=print onload='this.media="all"'><link rel=stylesheet href=/css/wowchemy.7f941cbf693fd0dc31ea778b8082dc1d.css><link rel=stylesheet href=/css/libs/chroma/github-light.min.css title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=/css/libs/chroma/dracula.min.css title=hl-dark media=print onload='this.media="all"' disabled><meta name=author content="Wei Ouyang"><meta name=description content="ImageJ, a renowned open-source image processing tool, has long been a familiar name in the scientific community. Seeking to build upon its rich legacy, we undertook an ambitious endeavor: to transition ImageJ to the web through ImageJ."><link rel=alternate hreflang=en-us href=https://aicell.io/post/improving-imagej.js/><link rel=canonical href=https://aicell.io/post/improving-imagej.js/><link rel=manifest href=/manifest.webmanifest><link rel=icon type=image/png href=/media/icon_hubbd5b6736a681e06d544a07516505556_1406139_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=/media/icon_hubbd5b6736a681e06d544a07516505556_1406139_180x180_fill_lanczos_center_3.png><meta name=theme-color content="#1565c0"><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content="@imweio"><meta property="twitter:creator" content="@imweio"><meta property="twitter:image" content="https://aicell.io/post/improving-imagej.js/featured.png"><meta property="og:site_name" content="AICell Lab"><meta property="og:url" content="https://aicell.io/post/improving-imagej.js/"><meta property="og:title" content="Taking ImageJ.JS to the Next Level | AICell Lab"><meta property="og:description" content="ImageJ, a renowned open-source image processing tool, has long been a familiar name in the scientific community. Seeking to build upon its rich legacy, we undertook an ambitious endeavor: to transition ImageJ to the web through ImageJ."><meta property="og:image" content="https://aicell.io/post/improving-imagej.js/featured.png"><meta property="og:locale" content="en-us"><meta property="article:published_time" content="2023-11-05T00:00:00+00:00"><meta property="article:modified_time" content="2023-11-05T00:00:00+00:00"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://aicell.io/post/improving-imagej.js/"},"headline":"Taking ImageJ.JS to the Next Level","image":["https://aicell.io/post/improving-imagej.js/featured.png"],"datePublished":"2023-11-05T00:00:00Z","dateModified":"2023-11-05T00:00:00Z","author":{"@type":"Person","name":"Wei Ouyang"},"publisher":{"@type":"Organization","name":"AICell Lab","logo":{"@type":"ImageObject","url":"https://aicell.io/media/icon_hubbd5b6736a681e06d544a07516505556_1406139_192x192_fill_lanczos_center_3.png"}},"description":"ImageJ, a renowned open-source image processing tool, has long been a familiar name in the scientific community. Seeking to build upon its rich legacy, we undertook an ambitious endeavor: to transition ImageJ to the web through ImageJ."}</script><title>Taking ImageJ.JS to the Next Level | AICell Lab</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8RMPPP7P2"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8RMPPP7P2")</script></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=a1d903aa0a941cd202111de559f96d05><script src=/js/wowchemy-init.min.ec9d49ca50e4b80bdb08f0417a28ed84.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class=col-6><h1>Search</h1></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=Close><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box><input name=q id=search-query placeholder=Search... autocapitalize=off autocomplete=off autocorrect=off spellcheck=false type=search class=form-control aria-label=Search...></div></section><section class=section-search-results><div id=search-hits></div></section></div></aside><div class="page-header header--fixed"><header><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>AICell Lab</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label="Toggle navigation">
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>AICell Lab</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/#about><span>Home</span></a></li><li class=nav-item><a class=nav-link href=/#people><span>People</span></a></li><li class=nav-item><a class=nav-link href=/#projects><span>Projects</span></a></li><li class=nav-item><a class=nav-link href=/recruiting><span>Recruiting</span></a></li><li class=nav-item><a class=nav-link href=/publication><span>Publications</span></a></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=Search><i class="fas fa-search" aria-hidden=true></i></a></li><li class="nav-item dropdown theme-dropdown"><a href=# class=nav-link data-toggle=dropdown aria-haspopup=true aria-label="Display preferences"><i class="fas fa-moon" aria-hidden=true></i></a><div class=dropdown-menu><a href=# class="dropdown-item js-set-theme-light"><span>Light</span></a>
<a href=# class="dropdown-item js-set-theme-dark"><span>Dark</span></a>
<a href=# class="dropdown-item js-set-theme-auto"><span>Automatic</span></a></div></li></ul></div></nav></header></div><div class=page-body><article class=article><div class="article-container pt-3"><h1>Taking ImageJ.JS to the Next Level</h1><div class=article-metadata><span class=article-date>Nov 5, 2023</span>
<span class=middot-divider></span>
<span class=article-reading-time>4 min read</span></div></div><div class="article-header article-container featured-image-wrapper mt-4 mb-4" style=max-width:720px;max-height:385px><div style=position:relative><img src=/post/improving-imagej.js/featured_hubf64091c90568103adfb48ba463772ec_416071_720x2500_fit_q75_h2_lanczos_3.webp width=720 height=385 alt class=featured-image></div></div><div class=article-container><div class=article-style><p><a href=https://imagej.nih.gov/ij/ target=_blank rel=noopener>ImageJ</a>, a renowned open-source image processing tool, has long been a familiar name in the scientific community. Seeking to build upon its rich legacy, we undertook an ambitious endeavor: to transition ImageJ to the web through <a href=https://ij.imjoy.io target=_blank rel=noopener>ImageJ.JS</a>. The outcome? An unequivocal triumph. ImageJ.JS has captivated a global audience, attracting over 1,000 users daily. The ability to run ImageJ on mobile devices and iPads has been particularly celebrated, offering users a newfound flexibility and accessibility in their work.</p><h2 id=a-brief-look-back>A Brief Look Back</h2><p>The creation of <a href=https://ij.imjoy.io target=_blank rel=noopener>ImageJ.JS</a> originated from a desire to bring the robust capabilities of the ImageJ image analysis tool directly to web browsers. In the initial stages, we utilized compilers such as <a href=https://leaningtech.com/cheerpj/ target=_blank rel=noopener>CheerpJ</a> to facilitate this transition. This process entailed converting Java Archive (<code>.jar</code>) files into JavaScript (<code>.jar.js</code>) files, thereby enabling the execution of Java applications in browsers without necessitating plugins.</p><p>However, despite these efforts, we encountered several hurdles:</p><ul><li><strong>File Size Limitations</strong>: The web-based environment imposed constraints on loading large datasets, restricting us to files smaller than 4GB.</li><li><strong>Lack of Multi-threading Support</strong>: The absence of multi-threading capabilities limited the performance and speed of computations.</li><li><strong>Plugin Integration Challenges</strong>: Incorporating and compiling ImageJ plugins into the web version was a complex task, often requiring extensive adjustments to ensure compatibility.</li></ul><p>To address these issues, we initiated a <a href=https://github.com/imjoy-team/imageja.js target=_blank rel=noopener>fork of the ImageJ project on GitHub</a>. Here, we explored solutions to bypass the aforementioned constraints and enhance functionality. By delving into the source code, we aimed to optimize ImageJ.JS for smoother and more efficient performance in web environments.</p><h2 id=elevating-imagejjs>Elevating ImageJ.JS</h2><p>Determined to enhance <a href=https://ij.imjoy.io target=_blank rel=noopener>ImageJ.JS</a>, our team actively sought out cutting-edge solutions that could refine the user experience and expand its capabilities. Recently, <a href=https://labs.leaningtech.com/blog/announcing-cheerpj-3 target=_blank rel=noopener>the launch of the updated CheerpJ compiler 3</a> provided a promising avenue for exploration.</p><p>This new version of <a href=https://leaningtech.com/cheerpj/ target=_blank rel=noopener>CheerpJ</a> introduced several transformative features. Notably, the new JIT compilation support eliminated the necessity for an intermediate compilation step, which had previously been a cumbersome phase in the deployment process. Instead, the updated CheerpJ allows <code>.jar</code> files, originally constructed for a standard Java Virtual Machine (JVM), to be loaded directly into the browser. It also support full classloader which makes it easier to dynamically load jar files. This innovation significantly streamlined the process of bringing Java applications into web environments.</p><p>So, what implications does this have for ImageJ.JS?</p><ul><li><strong>Streamlined Plugin Integration</strong>: The ability to load <code>.jar</code> files directly paves the way for easier integration with ImageJ&rsquo;s vast plugin ecosystem. Users can now anticipate smoother, more straightforward implementations of plugins, enhancing the versatility of ImageJ.JS.</li><li><strong>Dynamic Patching Capabilities</strong>: The updated CheerpJ facilitates dynamic patching, wherein we can swiftly adapt and modify functions to align with web-specific requirements. This provides a seamless transition between traditional desktop applications and web environments, ensuring consistent user experience across platforms.</li></ul><p>Upon delving deep into the capabilities of the updated CheerpJ, we were encouraged by the initial results. Enhancements in the speed and efficiency of certain functions were evident, and the newfound ease of integration marked a significant step forward.</p><p>Here is how the 3D volume viewer looks like in the new ImageJ.JS:</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=./3d-volume-viewer.gif alt="3D Volume Viewer" loading=lazy data-zoomable></div></div></figure></p><p>And the 3D surface plot:</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=./3d-surface-plot.gif alt="3D Surface Plot" loading=lazy data-zoomable></div></div></figure></p><p>Without any compilation step, we can for example, directly load the MorpholibJ plugin and run it inside ImageJ.JS:</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=./morpholibj-filters.gif alt=MorphoLibJ loading=lazy data-zoomable></div></div></figure></p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=./thunderstorm.png alt=ThunderSTORM loading=lazy data-zoomable></div></div></figure></p><p><strong>Feel free to try the new version yourself at <a href=https://aicell-lab.github.io/imagej.js/ target=_blank rel=noopener>https://aicell-lab.github.io/imagej.js/</a>.</strong></p><p>However, we recognize that this is an ongoing journey of optimization and exploration. Our team continues to probe the possibilities and potential improvements, committed to elevating ImageJ.JS to its utmost potential.</p><h2 id=the-future-of-imagejjs>The Future of ImageJ.JS</h2><p>ImageJ.JS&rsquo;s popularity isn&rsquo;t just in numbers. Its adaptability on platforms like mobiles and iPads has won users&rsquo; hearts. With this enthusiasm, we are even more committed to refining the experience.</p><p>Next steps include:</p><ul><li>Fix the file loading with the hope of support files larger than the memory</li><li>Evaluating file chooser integration and potential mapping with our elFinder plugin.</li><li>Envisioning a browser version of Fiji with a robust plugin system, enabling most ImageJ plugins to be used directly in ImageJ.JS.</li></ul><p>In wrapping up, ImageJ.JS represents the convergence of a powerful legacy tool with modern technological adaptability. As we push its boundaries, we&rsquo;re excited about its potential to further transform scientific image analysis on the web.</p><h2 id=join-us-on-this-journey>Join Us on This Journey</h2><p>We invite you to participate in this exciting venture. The repository for the new version of ImageJ.js is <strong>available on GitHub: <a href=https://github.com/aicell-lab/imagej.js target=_blank rel=noopener>https://github.com/aicell-lab/imagej.js</a></strong>.</p><p>We welcome contributions, insights, and collaborations from the community. Together, let&rsquo;s shape the future of web-based image analysis and continue to push the boundaries of what&rsquo;s possible with ImageJ.js.</p><h2 id=acknowledgments>Acknowledgments</h2><p>We thank Curtis Rueden for his support and guidance in the development of ImageJ.JS, we also thank Leaning Technologies for providing us the compiler which makes it possible to run ImageJ in the browser.</p></div><div class=share-box><ul class=share><li><a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Faicell.io%2Fpost%2Fimproving-imagej.js%2F&text=Taking+ImageJ.JS+to+the+Next+Level" target=_blank rel=noopener class=share-btn-twitter aria-label=twitter><i class="fab fa-twitter"></i></a></li><li><a href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Faicell.io%2Fpost%2Fimproving-imagej.js%2F&t=Taking+ImageJ.JS+to+the+Next+Level" target=_blank rel=noopener class=share-btn-facebook aria-label=facebook><i class="fab fa-facebook"></i></a></li><li><a href="mailto:?subject=Taking%20ImageJ.JS%20to%20the%20Next%20Level&body=https%3A%2F%2Faicell.io%2Fpost%2Fimproving-imagej.js%2F" target=_blank rel=noopener class=share-btn-email aria-label=envelope><i class="fas fa-envelope"></i></a></li><li><a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Faicell.io%2Fpost%2Fimproving-imagej.js%2F&title=Taking+ImageJ.JS+to+the+Next+Level" target=_blank rel=noopener class=share-btn-linkedin aria-label=linkedin-in><i class="fab fa-linkedin-in"></i></a></li><li><a href="whatsapp://send?text=Taking+ImageJ.JS+to+the+Next+Level%20https%3A%2F%2Faicell.io%2Fpost%2Fimproving-imagej.js%2F" target=_blank rel=noopener class=share-btn-whatsapp aria-label=whatsapp><i class="fab fa-whatsapp"></i></a></li><li><a href="https://service.weibo.com/share/share.php?url=https%3A%2F%2Faicell.io%2Fpost%2Fimproving-imagej.js%2F&title=Taking+ImageJ.JS+to+the+Next+Level" target=_blank rel=noopener class=share-btn-weibo aria-label=weibo><i class="fab fa-weibo"></i></a></li></ul></div><div class="media author-card content-widget-hr"><a href=/authors/wei/><img class="avatar mr-3 avatar-circle" src=/authors/wei/avatar_hu0ce560e89e4fe59f2efd026b9618f649_13255105_270x270_fill_lanczos_center_3.png alt="Wei Ouyang"></a><div class=media-body><h5 class=card-title><a href=/authors/wei/>Wei Ouyang</a></h5><h6 class=card-subtitle>Principle Investigator</h6><p class=card-text>Assistant Professor at KTH Royal Institute of Technology</p><ul class=network-icon aria-hidden=true><li><a href=https://oeway.github.io target=_blank rel=noopener><i class="fas fa-circle-info"></i></a></li><li><a href=mailto:wei.ouyang@scilifelab.se><i class="fas fa-envelope"></i></a></li><li><a href=https://twitter.com/imweio target=_blank rel=noopener><i class="fab fa-twitter"></i></a></li><li><a href=https://github.com/oeway target=_blank rel=noopener><i class="fab fa-github"></i></a></li></ul></div></div></div></article></div><div class=page-footer><div class=container><footer class=site-footer><p class="powered-by copyright-license-text">© 2023 AICell Lab. All the content of this website is licensed under <a href=https://creativecommons.org/licenses/by-nc-nd/4.0 rel="noopener noreferrer" target=_blank>CC BY NC ND 4.0</a><br>The content on this website has been partially generated and refined using advanced Generative Language Learning Models such as ChatGPT.</p><p class="powered-by footer-license-icons"><a href=https://creativecommons.org/licenses/by-nc-nd/4.0 rel="noopener noreferrer" target=_blank aria-label="Creative Commons"><i class="fab fa-creative-commons fa-2x" aria-hidden=true></i>
<i class="fab fa-creative-commons-by fa-2x" aria-hidden=true></i>
<i class="fab fa-creative-commons-nc fa-2x" aria-hidden=true></i>
<i class="fab fa-creative-commons-nd fa-2x" aria-hidden=true></i></a></p><p class=powered-by>Published with <a href="https://wowchemy.com/?utm_campaign=poweredby" target=_blank rel=noopener>Wowchemy</a> — the free, <a href=https://github.com/wowchemy/wowchemy-hugo-themes target=_blank rel=noopener>open source</a> website builder that empowers creators.</p></footer></div></div><script src=/js/vendor-bundle.min.2bb60465c9a6f6dac617acc847766f5d.js></script>
<script id=search-hit-fuse-template type=text/x-template>
    <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
    </div>
  </script><script src=https://cdn.jsdelivr.net/gh/krisk/Fuse@v3.2.1/dist/fuse.min.js integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/julmot/mark.js@8.11.1/dist/jquery.mark.min.js integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin=anonymous></script>
<script id=page-data type=application/json>{"use_headroom":true}</script><script src=/js/wowchemy-headroom.db4755770454eb63685f8de785c0a172.js type=module></script>
<script src=/en/js/wowchemy.min.3e1da109d2e914983ef073d8b1b7197c.js></script><div id=modal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h5 class=modal-title>Cite</h5><button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&#215;</span></button></div><div class=modal-body><pre><code></code></pre></div><div class=modal-footer><a class="btn btn-outline-primary my-1 js-copy-cite" href=# target=_blank><i class="fas fa-copy"></i> Copy</a>
<a class="btn btn-outline-primary my-1 js-download-cite" href=# target=_blank><i class="fas fa-download"></i> Download</a><div id=modal-error></div></div></div></div></div><script src=/js/wowchemy-publication.68f8d7090562ca65fc6d3cb3f8f2d2cb.js type=module></script></body></html>